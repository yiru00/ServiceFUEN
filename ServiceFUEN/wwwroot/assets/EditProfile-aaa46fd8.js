import{_,u as p,o as c,c as u,b as e,w as d,v as n,p as f,f as m}from"./index-c008cf96.js";import{a as h}from"./axios-aba6f0e0.js";const b={data(){return{realname:"",nickname:"",birthday:"",mobile:"",address:"",about:"",selectedFile:null,photoData:new URL("/assets/userPic-484791d6.png",self.location)}},mixins:[p],async created(){let i=await this.fetchMemberId();h.get(`https://localhost:7259/api/Members/Profile?id=${i}`,{headers:{Authorization:"Bearer "+$.cookie("token")}}).then(t=>{this.realname=t.data.realName,this.nickname=t.data.nickName,this.birthday=t.data.birthOfDate.substring(0,10),this.mobile=t.data.mobile,this.address=t.data.address,this.about=t.data.about,this.photoData=`https://localhost:7259/Images/${t.data.photoSticker}`,console.log(t.data)}).catch(t=>{console.log(t)})},methods:{uploadpicture(){this.$refs.fileSticker.click()},handleFileChange(i){const t=i.target.files[0];this.selectedFile=t;const r=new FileReader;r.readAsDataURL(t),r.onload=()=>{this.photoData=r.result}},async submitForm(){if(!this.selectedFile||!this.realname||!this.nickname||!this.birthday||!this.mobile||!this.address||!this.about){this.showAlert("填完所有資料開始最好體驗");return}const i=new FormData;i.append("file",this.selectedFile),i.append("RealName",this.realname),i.append("NickName",this.nickname),i.append("birthOfDate",this.birthday),i.append("Mobile",this.mobile),i.append("Address",this.address),i.append("About",this.about);try{const t=await h.post("https://localhost:7259/api/Members/EditProfile",i,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+$.cookie("token")}});this.$router.go(0)}catch(t){console.error(t)}}}},l=i=>(f("data-v-f7741d24"),i=i(),m(),i),g={class:"container"},v={class:"content"},k=l(()=>e("div",{class:"edit_profile_header"},[e("h1",null,"編輯個人資訊")],-1)),y={class:"edit_profile"},x={class:"edit_profile_left"},F=["src"],D={class:"edit_profile_right_info_photo"},w={class:"edit_profile_right"},U={class:"edit_profile_right_info"},C=l(()=>e("label",{for:""},"姓名",-1)),V={class:"edit_profile_right_info"},A=l(()=>e("label",{for:""},"暱稱",-1)),I={class:"edit_profile_right_info"},N=l(()=>e("label",{for:""},"生日",-1)),S={class:"edit_profile_right_info"},B=l(()=>e("label",{for:""},"手機",-1)),M={class:"edit_profile_right_info"},P=l(()=>e("label",{for:""},"地址",-1)),E={class:"edit_profile_right_info"},R=l(()=>e("label",{for:""},"關於",-1)),z={class:"edit_profile_submit"};function L(i,t,r,O,s,a){return c(),u("section",null,[e("div",g,[e("div",v,[k,e("div",y,[e("div",x,[e("img",{src:s.photoData},null,8,F),e("div",D,[e("button",{for:"",class:"file-label",onClick:t[0]||(t[0]=(...o)=>a.uploadpicture&&a.uploadpicture(...o))},"頭貼"),e("input",{id:"file-input",class:"file-input",type:"file",ref:"fileSticker",onChange:t[1]||(t[1]=(...o)=>a.handleFileChange&&a.handleFileChange(...o))},null,544)])]),e("div",w,[e("div",U,[C,d(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=o=>s.realname=o)},null,512),[[n,s.realname]])]),e("div",V,[A,d(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=o=>s.nickname=o)},null,512),[[n,s.nickname]])]),e("div",I,[N,d(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=o=>s.birthday=o)},null,512),[[n,s.birthday]])]),e("div",S,[B,d(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=o=>s.mobile=o)},null,512),[[n,s.mobile]])]),e("div",M,[P,d(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=o=>s.address=o)},null,512),[[n,s.address]])]),e("div",E,[R,d(e("textarea",{class:"text_about",type:"text","onUpdate:modelValue":t[7]||(t[7]=o=>s.about=o)},null,512),[[n,s.about]])])])]),e("div",z,[e("button",{class:"btn edit_profile_submit_btn",onClick:t[8]||(t[8]=(...o)=>a.submitForm&&a.submitForm(...o))},"送出")])])])])}const q=_(b,[["render",L],["__scopeId","data-v-f7741d24"]]);export{q as default};
