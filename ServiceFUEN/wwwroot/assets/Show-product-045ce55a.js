import{a as C}from"./axios-aba6f0e0.js";import{_ as v,o as r,a as d,l as u,b as e,t as h,F as _,z as f,A as y,r as w,m,q as x,w as g,B as P,v as b,s as B}from"./index-c4b7e087.js";const A={data(){return{products:null}},created(){this.CallNewProductsApi()},methods:{async CallNewProductsApi(){await C.get("https://localhost:7259/api/Product/NewProducts").then(t=>{this.products=t.data}).catch(t=>{console.log(t)})}}},k=t=>(f("data-v-f0c73d52"),t=t(),y(),t),I={class:"card card1"},N=k(()=>e("div",{class:"card-img-top"},[e("img",{class:"d-block w-100 h-236px",src:"https://www.bigcamera.com.tw/data/goods/201311/1384338680718085767.jpg",alt:""})],-1)),$={class:"card-body"},O={class:"text-dark text-decoration-none stretched-link",href:"https://www.bigcamera.com.tw/goods_view.php?no=182",target:"_blank"},V={class:"card-footer bg-white border-top-0 d-flex"},j={class:"me-auto"};function Q(t,s,i,l,a,c){return r(!0),d(_,null,u(a.products,n=>(r(),d("div",{class:"col-md-3",key:n.id},[e("div",I,[N,e("div",$,[e("a",O,h(n.name),1)]),e("div",V,[e("span",j,h(n.price),1)])])]))),128)}const R=v(A,[["render",Q],["__scopeId","data-v-f0c73d52"]]);const L={name:"AllProduct",props:["parentProduct"],data(){return{products:null}},watch:{parentProduct(){this.products=this.parentProduct}},created(){this.CallAllProductsApi()},methods:{async CallAllProductsApi(){await axios.get("https://localhost:7259/api/Product/AllProducts").then(t=>{this.products=t.data}).catch(t=>{console.log(t)})},async addToCart(t,s,i){if(s!=3){let l=document.querySelector(i),a=l.value,c=this.cartsSelect.indexOf(t);if(console.log("findIndex",c),console.log("input",l),console.log("count",a),s==1&&a==1){this.removeCartItem(t);return}if(s==2&&a==0){this.removeCartItem(t,!0);return}switch(s){case 0:this.cartsSelect[c].Qty++;break;case 1:this.cartsSelect[c].Qty--;break;case 2:this.cartsSelect[c].Qty=a;break}this.saveLocalStorage("cartsSelect",this.cartsSelect)}else{let l=this.cartsSelect.find(a=>a.Id==t.id);if(console.log("findProduct add",l),l){let a=this.cartsSelect.indexOf(l);this.cartsSelect[a].Qty++}else this.cartsSelect.push({Id:t.id,Qty:1,Name:t.name,Price:t.price});this.saveLocalStorage("cartsSelect",this.cartsSelect)}console.log(this.cartsSelect)},async removeCartItem(t,s){let i=this.cartsSelect.indexOf(t);i>-1&&this.$swal.fire(this.delSweetConfirm).then(l=>{l.isConfirmed?(this.cartsSelect.splice(i,1),this.saveLocalStorage("cartsSelect",this.cartsSelect)):s&&this.getlocalStorage("cartsSelect")})}}},D=t=>(f("data-v-1af2efa1"),t=t(),y(),t),T={class:"card card1"},U=D(()=>e("div",{class:"card-img-top"},[e("img",{class:"d-block w-100 h-236px",src:"https://www.bigcamera.com.tw/data/goods/201311/1384338680718085767.jpg",alt:""})],-1)),q={class:"card-body"},F={class:"text-nowrap text-dark text-decoration-none stretched-link",href:"https://www.bigcamera.com.tw/goods_view.php?no=182",target:"_blank"},M={class:"card-footer bg-white border-top-0 price"};function z(t,s,i,l,a,c){const n=w("router-link");return r(!0),d(_,null,u(a.products,p=>(r(),d("div",{class:"col-md-3",key:p.id},[m(n,{to:/Product/+p.id},{default:x(()=>[e("div",T,[U,e("div",q,[e("a",F,h(p.name.slice(0,18))+"... ",1)]),e("div",M,[e("span",null,"NTD "+h(p.price),1)])])]),_:2},1032,["to"])]))),128)}const E=v(L,[["render",z],["__scopeId","data-v-1af2efa1"]]);const K={components:{NewProduct:R,AllProduct:E},name:"AllProducts",data(){return{Categorylist:[],Brandlist:[],optionCate:"0",optionbrand:"0",inputProName:"",ProductResult:[]}},created(){this.CallCategorylistApi(),this.CallBrandlistApi(),this.CallOrderByPriceS()},methods:{async CallCategorylistApi(){await axios.get("https://localhost:7259/api/Category/Categorylist").then(t=>{console.log(t.data),this.Categorylist=t.data}).catch(t=>{console.log(t)})},async CallBrandlistApi(){await axios.get("https://localhost:7259/api/Brands/Brandlist").then(t=>{console.log(t),this.Brandlist=t.data}).catch(t=>{console.log(t)})},async CallSearchApi(){await axios.get(`https://localhost:7259/api/Product/Search?name=${this.inputProName}&categoryId=${this.optionCate}&brandId=${this.optionbrand}`).then(t=>{console.log(t.data),this.ProductResult=t.data}).catch(t=>{console.log(t)})},async CallOrderByPriceS(){await axios.get("https://localhost:7259/api/Product/OrderByPriceS").then(t=>{this.ProductResult=t.data}).catch(t=>{console.log(t)})},async CallOrderByPriceB(){await axios.get("https://localhost:7259/api/Product/OrderByPriceB").then(t=>{this.ProductResult=t.data}).catch(t=>{console.log(t)})}}},S=t=>(f("data-v-dac98781"),t=t(),y(),t),G={class:"container h-100 py-5"},H=B('<div class="slider" data-v-dac98781><img src="https://www.bigcamera.com.tw/data/flash/202302/1675329292385310396.png" alt="slider-1" data-v-dac98781><img src="https://www.bigcamera.com.tw/data/flash/202207/1657704437671146134.jpg" alt="slider-2" data-v-dac98781><img src="https://www.bigcamera.com.tw/data/flash/202112/1638432752754984139.jpg" alt="slider-3" data-v-dac98781></div><div class="newproduct" data-v-dac98781>新品上市</div>',2),J={class:"row m-3"},W={class:"d-flex justify-content-center m-5"},X=S(()=>e("option",{value:"0"},"所有類別",-1)),Y=["value"],Z=S(()=>e("option",{value:"0"},"所有品牌",-1)),tt=["value"],et={class:"search d-flex m-2"},st={class:"newproduct"},at={class:"row m-3"};function ot(t,s,i,l,a,c){const n=w("NewProduct"),p=w("AllProduct");return r(),d("div",G,[H,e("div",J,[m(n)]),e("div",W,[g(e("select",{name:"type",class:"type_select m-2","onUpdate:modelValue":s[0]||(s[0]=o=>a.optionCate=o)},[X,(r(!0),d(_,null,u(a.Categorylist,o=>(r(),d("option",{key:o.name,value:o.id},h(o.name),9,Y))),128))],512),[[P,a.optionCate]]),g(e("select",{name:"brand",class:"type_select m-2","onUpdate:modelValue":s[1]||(s[1]=o=>a.optionbrand=o)},[Z,(r(!0),d(_,null,u(a.Brandlist,o=>(r(),d("option",{key:o.name,value:o.id},h(o.name),9,tt))),128))],512),[[P,a.optionbrand]]),e("div",et,[e("div",{class:"search_icon",onClick:s[2]||(s[2]=(...o)=>c.CallSearchApi&&c.CallSearchApi(...o))},"**"),g(e("input",{"onUpdate:modelValue":s[3]||(s[3]=o=>a.inputProName=o),type:"text",placeholder:"輸入商品關鍵字...",onKeyup:s[4]||(s[4]=(...o)=>c.CallSearchApi&&c.CallSearchApi(...o)),class:"search_input"},null,544),[[b,a.inputProName]])])]),e("div",st,[e("button",{onClick:s[5]||(s[5]=(...o)=>c.CallOrderByPriceS&&c.CallOrderByPriceS(...o)),class:"filter_btn"},"價格*"),e("button",{onClick:s[6]||(s[6]=(...o)=>c.CallOrderByPriceB&&c.CallOrderByPriceB(...o)),class:"filter_btn"},"價格*")]),e("div",at,[m(p,{parentProduct:a.ProductResult},null,8,["parentProduct"])])])}const rt=v(K,[["render",ot],["__scopeId","data-v-dac98781"]]);export{rt as default};
